(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();class g{constructor({color:t,empty:i}){this.color=t,this.empty=i}get isEmpty(){return this.empty}get getColor(){return this.color}}const f=class f extends g{constructor(){super({color:f.baseColor,empty:!0})}};f.baseColor="#fff";let d=f;class C{constructor(t){this.width=Math.floor(t.canvasWidth/t.gridCellDimension),this.height=Math.floor(t.canvasHeight/t.gridCellDimension),this.canvasContext=t.context,this.pixelDimension=t.gridCellDimension,this.grid=new Array(this.height*this.width).fill(new d),this.rowCount=Math.floor(this.grid.length/this.width)}clear(){this.grid=new Array(this.height*this.width).fill(new d)}set(t,i,o){if(t>=this.width||t<0||i>=this.height||i<0)return;const e=this.getIndex(t,i);this.grid[e]=o}setCircle(t,i,o,e=2,s=1){let n=e*e;for(let r=-e;r<=e;r++)for(let l=-e;l<=e;l++)l*l+r*r<=n&&Math.random()<s&&this.set(t+l,i+r,o())}swap(t,i){const o=this.grid[t],e=this.grid[i];this.setIndex(t,e),this.setIndex(i,o)}isEmpty(t){return t<0||t>=this.grid.length?!1:this.grid[t].isEmpty}draw(){for(let t=0;t<this.grid.length;++t){const i=this.grid[t];if(i.isEmpty)continue;const{x:o,y:e}=this.convertIndexToCoords(t);this.canvasContext.save(),this.canvasContext.fillStyle=i.getColor,this.canvasContext.fillRect(o*this.pixelDimension,e*this.pixelDimension,this.pixelDimension,this.pixelDimension),this.canvasContext.restore()}this.update()}update(){for(let t=this.rowCount-1;t>=0;--t){const i=t*this.width,o=Math.random()>.5;for(let e=0;e<this.width;++e){const s=o?e:-e-1+this.width;this.updateParticle(i+s)}}}convertIndexToCoords(t){return{x:t%this.width,y:Math.floor(t/this.width)}}updateParticle(t){const i=t+this.width,o=i-1,e=i+1;this.isEmpty(i)?this.swap(t,i):this.isEmpty(o)?this.swap(t,o):this.isEmpty(e)&&this.swap(t,e)}getIndex(t,i){return i*this.width+t}setIndex(t,i){this.grid[t]=i}}const a=class a extends g{constructor(){super({color:a.getRandomSandColor(),empty:!1})}static getRandomSandColor(){return a.SandColors[Math.floor(Math.random()*a.SandColors.length)]}};a.SandColors=["#eaba6b","#ead2ac","#f7e8a4"];let u=a;function x(){const h=window.innerHeight-10,t=window.innerWidth-10,i=5;let o=!1,e={x:null,y:null};const s=document.querySelector("#canvas");s.height=h,s.width=t;const n=s.getContext("2d"),r=new C({context:n,canvasHeight:h,canvasWidth:t,gridCellDimension:i});function l(){n.clearRect(0,0,t,h),r.draw(),window.requestAnimationFrame(l)}s.addEventListener("pointerdown",m),s.addEventListener("pointerup",()=>o=!1),s.addEventListener("pointerout",()=>o=!1),s.addEventListener("pointermove",c=>{e={x:c.clientX,y:c.clientY}});async function m(c){for(c.preventDefault(),o=!0,e.x=c.clientX,e.y=c.clientY;o;){await new Promise(y=>setTimeout(y,1e3/60));const w=Math.floor((e.x-5)/i),p=Math.floor((e.y-5)/i);r.setCircle(w,p,()=>new u,2,.5)}}l()}x();
