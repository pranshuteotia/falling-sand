(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}})();class m{constructor(t){this.width=Math.floor(t.canvasWidth/t.gridCellDimension),this.height=Math.floor(t.canvasHeight/t.gridCellDimension),this.canvasContext=t.context,this.pixelDimension=t.gridCellDimension,this.grid=new Array(this.height*this.width).fill("white")}clear(){this.grid=new Array(this.height*this.width).fill("white")}set(t,s,n){t>=this.width||t<0||s>=this.height||s<0||(this.grid[s*this.width+t]=n)}setCircle(t,s,n,e=2,i=1){let o=e*e;for(let r=-e;r<=e;r++)for(let h=-e;h<=e;h++)h*h+r*r<=o&&Math.random()<i&&this.set(t+h,s+r,n())}swap(t,s){const n=this.grid[t];this.grid[t]=this.grid[s],this.grid[s]=n}isEmpty(t){return this.grid[t]==="white"}draw(){for(let t=0;t<this.grid.length;++t){const s=this.grid[t];if(s==="white")continue;const{x:n,y:e}=this.convertIndexToCoords(t);this.canvasContext.save(),this.canvasContext.fillStyle=s,this.canvasContext.fillRect(n*this.pixelDimension,e*this.pixelDimension,this.pixelDimension,this.pixelDimension),this.canvasContext.restore()}for(let t=this.grid.length-this.width-1;t>0;--t)this.update(t)}convertIndexToCoords(t){return{x:t%this.width,y:Math.floor(t/this.width)}}update(t){const s=t+this.width,n=s-1,e=s+1;if(this.isEmpty(s))this.swap(t,s);else if(this.isEmpty(n)&&this.isEmpty(e)){const i=Math.random()>.5?n:e;this.swap(t,i)}else this.isEmpty(n)?this.swap(t,n):this.isEmpty(e)&&this.swap(t,e)}}function w(){const l=window.innerHeight-10,t=window.innerWidth-10,s=5;let n=!1,e={x:null,y:null};const i=document.querySelector("#canvas");i.height=l,i.width=t;const o=i.getContext("2d"),r=new m({context:o,canvasHeight:l,canvasWidth:t,gridCellDimension:s});function h(){o.clearRect(0,0,t,l),r.draw(),window.requestAnimationFrame(h)}i.addEventListener("pointerdown",a),i.addEventListener("pointerup",()=>n=!1),i.addEventListener("pointerout",()=>n=!1),i.addEventListener("pointermove",c=>{e={x:c.clientX,y:c.clientY}});async function a(c){for(n=!0,e.x=c.clientX,e.y=c.clientY;n;){await new Promise(u=>setTimeout(u,1e3/60));const d=Math.floor((e.x-5)/s),f=Math.floor((e.y-5)/s);r.setCircle(d,f,()=>"red",2,.5)}}h()}w();
