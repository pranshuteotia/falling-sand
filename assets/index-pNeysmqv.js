(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();class g{constructor({color:t,empty:i}){this.color=t,this.empty=i}get isEmpty(){return this.empty}get getColor(){return this.color}}const f=class f extends g{constructor(){super({color:f.baseColor,empty:!0})}};f.baseColor="#fff";let d=f;class C{constructor(t){this.width=Math.floor(t.canvasWidth/t.gridCellDimension),this.height=Math.floor(t.canvasHeight/t.gridCellDimension),this.canvasContext=t.context,this.pixelDimension=t.gridCellDimension,this.grid=new Array(this.height*this.width).fill(new d)}clear(){this.grid=new Array(this.height*this.width).fill(new d)}set(t,i,n){if(t>=this.width||t<0||i>=this.height||i<0)return;const e=this.getIndex(t,i);this.grid[e]=n}setCircle(t,i,n,e=2,s=1){let o=e*e;for(let r=-e;r<=e;r++)for(let l=-e;l<=e;l++)l*l+r*r<=o&&Math.random()<s&&this.set(t+l,i+r,n())}swap(t,i){const n=this.grid[t],e=this.grid[i];this.setIndex(t,e),this.setIndex(i,n)}isEmpty(t){return t<0||t>=this.grid.length?!1:this.grid[t].isEmpty}draw(){for(let t=0;t<this.grid.length;++t){const i=this.grid[t];if(i.isEmpty)continue;const{x:n,y:e}=this.convertIndexToCoords(t);this.canvasContext.save(),this.canvasContext.fillStyle=i.getColor,this.canvasContext.fillRect(n*this.pixelDimension,e*this.pixelDimension,this.pixelDimension,this.pixelDimension),this.canvasContext.restore()}for(let t=this.grid.length-this.width-1;t>0;--t)this.update(t)}convertIndexToCoords(t){return{x:t%this.width,y:Math.floor(t/this.width)}}update(t){const i=t+this.width,n=i-1,e=i+1;this.isEmpty(i)?this.swap(t,i):this.isEmpty(n)?this.swap(t,n):this.isEmpty(e)&&this.swap(t,e)}getIndex(t,i){return i*this.width+t}setIndex(t,i){this.grid[t]=i}}const h=class h extends g{constructor(){super({color:h.getRandomSandColor(),empty:!1})}static getRandomSandColor(){return h.SandColors[Math.floor(Math.random()*h.SandColors.length)]}};h.SandColors=["#eaba6b","#ead2ac","#f7e8a4"];let u=h;function x(){const c=window.innerHeight-10,t=window.innerWidth-10,i=5;let n=!1,e={x:null,y:null};const s=document.querySelector("#canvas");s.height=c,s.width=t;const o=s.getContext("2d"),r=new C({context:o,canvasHeight:c,canvasWidth:t,gridCellDimension:i});function l(){o.clearRect(0,0,t,c),r.draw(),window.requestAnimationFrame(l)}s.addEventListener("pointerdown",m),s.addEventListener("pointerup",()=>n=!1),s.addEventListener("pointerout",()=>n=!1),s.addEventListener("pointermove",a=>{e={x:a.clientX,y:a.clientY}});async function m(a){for(a.preventDefault(),n=!0,e.x=a.clientX,e.y=a.clientY;n;){await new Promise(y=>setTimeout(y,1e3/60));const w=Math.floor((e.x-5)/i),p=Math.floor((e.y-5)/i);r.setCircle(w,p,()=>new u,2,.5)}}l()}x();
